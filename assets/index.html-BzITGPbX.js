import{_ as a,c as t,a as i,o as r}from"./app-CsO-supt.js";const o="/shipjs/assets/preview-f1cTS5dU.gif",s={};function l(n,e){return r(),t("div",null,[...e[0]||(e[0]=[i('<h1 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction"><span>Introduction</span></a></h1><h2 id="why-ü§∑üèª‚Äç" tabindex="-1"><a class="header-anchor" href="#why-ü§∑üèª‚Äç"><span>Why ü§∑üèª‚Äç</span></a></h2><p>Coding is fun, debugging and testing are okay, but releasing is NOT.</p><p>When releasing, you go through something like the following:</p><ul><li>Update the version in <code>package.json</code></li><li>Update the changelog</li><li>Actually release it (e.g. <code>npm run build &amp;&amp; npm publish</code>)</li><li>Create a git tag</li><li>Create a release on GitHub</li></ul><h3 id="what-could-go-wrong" tabindex="-1"><a class="header-anchor" href="#what-could-go-wrong"><span>What could go wrong?</span></a></h3><ul><li>You might make mistakes during the release. <ul><li>Environments are different across your team members.</li><li>You&#39;re releasing alone because the whole process happens on your local machine.</li><li>It&#39;s not your everyday-job. Mistakes can happen.</li></ul></li><li>You are blocked and cannot do anything else until it&#39;s done. <ul><li>Even if you have a release script, you need to watch until the script finishes well.</li><li>You don&#39;t want to switch to another feature branch and work there until the script finishes.</li></ul></li></ul><h2 id="how-to-solve-them‚ùì" tabindex="-1"><a class="header-anchor" href="#how-to-solve-them‚ùì"><span>How to solve them‚ùì</span></a></h2><p>In Ship.js, the release process consists of three parts.</p><h3 id="part-1-preparation-shipjs-prepare" tabindex="-1"><a class="header-anchor" href="#part-1-preparation-shipjs-prepare"><span>Part 1. Preparation (<code>shipjs prepare</code>)</span></a></h3><p><img src="'+o+'" alt="Preview"></p><p>Run <code>shipjs prepare</code> and it will briefly do the following:</p><ul><li>Figure out next version.</li><li>Update the version and changelog.</li><li>Create a pull request.</li></ul><p>It takes less than a couple of minutes.</p><h3 id="part-2-review" tabindex="-1"><a class="header-anchor" href="#part-2-review"><span>Part 2. Review</span></a></h3><ul><li>Review the PR by yourself, or with your colleagues.</li><li>Add more commits to the PR if you want.</li><li>You can hold the release, build from the staging branch and test it manually.</li><li>If you want to cancel the release, just close the PR and delete the staging branch.</li></ul><p>When you think it&#39;s ready to release, merge the PR.</p><h3 id="part-3-trigger-a-release-shipjs-trigger" tabindex="-1"><a class="header-anchor" href="#part-3-trigger-a-release-shipjs-trigger"><span>Part 3. Trigger a release (<code>shipjs trigger</code>)</span></a></h3><p>Run <code>shipjs trigger</code> and it will briefly do the following:</p><ul><li>Run a final test (unit, e2e, etc).</li><li>Release it to NPM (or elsewhere as you configure it).</li><li>Create a git tag for the version.</li><li>Create a release for the tag on GitHub.</li></ul><p>You can manually run <code>shipjs trigger</code> on the base branch after the PR is merged.</p><p>However you can also configure your CI service(e.g. CircleCI) to do this for you. It means the longest process is on the CI service asynchronously, not occupying your working environment.</p><p class="action"><a href="./getting-started.html" class="nav-link action-button">Get Started ‚Üí</a></p><h2 id="or-a-little-deeper-look-Ô∏è" tabindex="-1"><a class="header-anchor" href="#or-a-little-deeper-look-Ô∏è"><span>Or, a little deeper look ‚ÅâÔ∏è</span></a></h2><p>Let&#39;s assume the following situation:</p><ul><li>Current branch: <code>master</code></li><li>Currently released version: <code>1.0.0</code></li><li>Next version: <code>1.0.1</code> (because there are only commits like <code>chore:</code>, <code>fix:</code>, ...)</li></ul><h3 id="part-1-preparation-shipjs-prepare-1" tabindex="-1"><a class="header-anchor" href="#part-1-preparation-shipjs-prepare-1"><span>Part 1. Preparation (<code>shipjs prepare</code>)</span></a></h3><p>On your terminal, run <code>shipjs prepare</code> and it will briefly do the following:</p><ul><li><code>git checkout -b releases/v1.0.1</code></li><li>Update the version in <code>package.json</code>.</li><li>Update the changelog.</li><li><code>git commit -m &quot;chore: release v1.0.1</code></li><li>Create a PR from <code>releases/v1.0.1</code> to <code>master</code>.</li></ul><p>You can run <code>shipjs prepare --dry-run</code> just to see what will be executed without actual execution.</p><h3 id="part-2-review-1" tabindex="-1"><a class="header-anchor" href="#part-2-review-1"><span>Part 2. Review</span></a></h3><p>You will review and merge this PR.</p><p>You can add more commits to this PR if needed.</p><p>Merge the PR into a single commit by <code>Squash and merge</code>.</p><p>You can read <a href="https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-request-merges#squash-and-merge-your-pull-request-commits" target="_blank" rel="noopener noreferrer">this</a> to learn more.</p><h3 id="part-3-trigger-a-release-shipjs-trigger-1" tabindex="-1"><a class="header-anchor" href="#part-3-trigger-a-release-shipjs-trigger-1"><span>Part 3. Trigger a release (<code>shipjs trigger</code>)</span></a></h3><p>On your terminal, <code>git pull</code> on <code>master</code> branch. And run <code>shipjs trigger</code>. It will check the following conditions whether it should proceed releasing or not.</p><ul><li>if it&#39;s <code>master</code> branch now</li><li>if the latest commit message is like <code>chore: releases v1.0.1 (#xx)</code></li></ul><p>If the conditions are met, <code>shipjs trigger</code> will briefly do the following:</p><ul><li>Send a Slack message to notify the beginning of the release(If configured).</li><li>Run test, build and release it.</li><li><code>git tag v1.0.1</code>.</li><li>Push them to git remote.</li><li><code>hub release create -m &lt;changelog&gt; v1.0.1</code></li><li>Notify at Slack.</li></ul><p>You can run <code>shipjs trigger --dry-run</code> just to see what will be executed without actual execution.</p><p>And you can configure your CI service to run the Part 3 on behalf of you. What you need to do is just to make it run <code>shipjs trigger</code> every time there is a new commit. It&#39;s okay to do so because <code>shipjs trigger</code> triggers release only when the conditions are met. If not, it skips.</p><p class="action"><a href="./getting-started.html" class="nav-link action-button">Get Started ‚Üí</a></p>',43)])])}const h=a(s,[["render",l]]),d=JSON.parse('{"path":"/guide/","title":"Introduction","lang":"en-US","frontmatter":{"title":"Introduction"},"git":{"updatedTime":1770286820000,"contributors":[{"name":"sarahdayan","username":"sarahdayan","email":"5370675+sarahdayan@users.noreply.github.com","commits":1,"url":"https://github.com/sarahdayan"}],"changelog":[{"hash":"dd4adacc592bb3ebef3754a17de76b2c24cf515a","time":1770286820000,"email":"5370675+sarahdayan@users.noreply.github.com","author":"Sarah Dayan","message":"chore: release v0.28.1 (#1039)"}]},"filePathRelative":"guide/README.md"}');export{h as comp,d as data};
