(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{160:function(e,t,r){},212:function(e,t,r){e.exports=r.p+"assets/img/preview.5ae0edf3.gif"},213:function(e,t,r){"use strict";var a=r(160);r.n(a).a},221:function(e,t,r){"use strict";r.r(t);r(213);var a=r(28),i=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"introduction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[e._v("#")]),e._v(" Introduction")]),e._v(" "),a("h2",{attrs:{id:"why-ü§∑üèª‚Äç"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#why-ü§∑üèª‚Äç"}},[e._v("#")]),e._v(" Why ü§∑üèª‚Äç")]),e._v(" "),a("p",[e._v("Coding is fun, debugging and testing are okay, but releasing is NOT.")]),e._v(" "),a("p",[e._v("When releasing, you go through something like the following:")]),e._v(" "),a("ul",[a("li",[e._v("Update the version in "),a("code",[e._v("package.json")])]),e._v(" "),a("li",[e._v("Update the changelog")]),e._v(" "),a("li",[e._v("Actually release it (e.g. "),a("code",[e._v("yarn build && yarn publish")]),e._v(")")]),e._v(" "),a("li",[e._v("Create a git tag")]),e._v(" "),a("li",[e._v("Create a release on GitHub")])]),e._v(" "),a("h3",{attrs:{id:"what-could-go-wrong"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-could-go-wrong"}},[e._v("#")]),e._v(" What could go wrong?")]),e._v(" "),a("ul",[a("li",[e._v("You might make mistakes during the release.\n"),a("ul",[a("li",[e._v("Environments are different across your team members.")]),e._v(" "),a("li",[e._v("You're releasing alone because the whole process happens on your local machine.")]),e._v(" "),a("li",[e._v("It's not your everyday-job. Mistakes can happen.")])])]),e._v(" "),a("li",[e._v("You are blocked and cannot do anything else until it's done.\n"),a("ul",[a("li",[e._v("Even if you have a release script, you need to watch until the script finishes well.")]),e._v(" "),a("li",[e._v("You don't want to switch to another feature branch and work there until the script finishes.")])])])]),e._v(" "),a("h2",{attrs:{id:"how-to-solve-them‚ùì"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#how-to-solve-them‚ùì"}},[e._v("#")]),e._v(" How to solve them‚ùì")]),e._v(" "),a("p",[e._v("In Ship.js, the release process consists of three parts.")]),e._v(" "),a("h3",{attrs:{id:"part-1-preparation-shipjs-prepare"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#part-1-preparation-shipjs-prepare"}},[e._v("#")]),e._v(" Part 1. Preparation ("),a("code",[e._v("shipjs prepare")]),e._v(")")]),e._v(" "),a("p",[a("img",{attrs:{src:r(212),alt:"Preview"}})]),e._v(" "),a("p",[e._v("Run "),a("code",[e._v("shipjs prepare")]),e._v(" and it will briefly do the following:")]),e._v(" "),a("ul",[a("li",[e._v("Figure out next version.")]),e._v(" "),a("li",[e._v("Update the version and changelog.")]),e._v(" "),a("li",[e._v("Create a pull request.")])]),e._v(" "),a("p",[e._v("It takes less than a couple of minutes.")]),e._v(" "),a("h3",{attrs:{id:"part-2-review"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#part-2-review"}},[e._v("#")]),e._v(" Part 2. Review")]),e._v(" "),a("ul",[a("li",[e._v("Review the PR by yourself, or with your colleagues.")]),e._v(" "),a("li",[e._v("Add more commits to the PR if you want.")]),e._v(" "),a("li",[e._v("You can hold the release, build from the staging branch and test it manually.")]),e._v(" "),a("li",[e._v("If you want to cancel the release, just close the PR and delete the staging branch.")])]),e._v(" "),a("p",[e._v("When you think it's ready to release, merge the PR.")]),e._v(" "),a("h3",{attrs:{id:"part-3-trigger-a-release-shipjs-trigger"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#part-3-trigger-a-release-shipjs-trigger"}},[e._v("#")]),e._v(" Part 3. Trigger a release ("),a("code",[e._v("shipjs trigger")]),e._v(")")]),e._v(" "),a("p",[e._v("Run "),a("code",[e._v("shipjs trigger")]),e._v(" and it will briefly do the following:")]),e._v(" "),a("ul",[a("li",[e._v("Run a final test (unit, e2e, etc).")]),e._v(" "),a("li",[e._v("Release it to NPM (or elsewhere as you configure it).")]),e._v(" "),a("li",[e._v("Create a git tag for the version.")]),e._v(" "),a("li",[e._v("Create a release for the tag on GitHub.")])]),e._v(" "),a("p",[e._v("You can manually run "),a("code",[e._v("shipjs trigger")]),e._v(" on the base branch after the PR is merged.")]),e._v(" "),a("p",[e._v("However you can also configure your CI service(e.g. CircleCI) to do this for you. It means the longest process is on the CI service asynchronously, not occupying your working environment.")]),e._v(" "),a("p",{staticClass:"action"},[a("a",{staticClass:"nav-link action-button",attrs:{href:"./getting-started.html"}},[e._v("Get Started ‚Üí")])]),e._v(" "),a("h2",{attrs:{id:"or-a-little-deeper-look-‚ÅâÔ∏è"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#or-a-little-deeper-look-‚ÅâÔ∏è"}},[e._v("#")]),e._v(" Or, a little deeper look ‚ÅâÔ∏è")]),e._v(" "),a("p",[e._v("Let's assume the following situation:")]),e._v(" "),a("ul",[a("li",[e._v("Current branch: "),a("code",[e._v("master")])]),e._v(" "),a("li",[e._v("Currently released version: "),a("code",[e._v("1.0.0")])]),e._v(" "),a("li",[e._v("Next version: "),a("code",[e._v("1.0.1")]),e._v(" (because there are only commits like "),a("code",[e._v("chore:")]),e._v(", "),a("code",[e._v("fix:")]),e._v(", ...)")])]),e._v(" "),a("h3",{attrs:{id:"part-1-preparation-shipjs-prepare-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#part-1-preparation-shipjs-prepare-2"}},[e._v("#")]),e._v(" Part 1. Preparation ("),a("code",[e._v("shipjs prepare")]),e._v(")")]),e._v(" "),a("p",[e._v("On your terminal, run "),a("code",[e._v("shipjs prepare")]),e._v(" and it will briefly do the following:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("git checkout -b releases/v1.0.1")])]),e._v(" "),a("li",[e._v("Update the version in "),a("code",[e._v("package.json")]),e._v(".")]),e._v(" "),a("li",[e._v("Update the changelog.")]),e._v(" "),a("li",[a("code",[e._v('git commit -m "chore: release v1.0.1')])]),e._v(" "),a("li",[e._v("Create a PR from "),a("code",[e._v("releases/v1.0.1")]),e._v(" to "),a("code",[e._v("master")]),e._v(".")])]),e._v(" "),a("p",[e._v("You can run "),a("code",[e._v("shipjs prepare --dry-run")]),e._v(" just to see what will be executed without actual execution.")]),e._v(" "),a("h3",{attrs:{id:"part-2-review-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#part-2-review-2"}},[e._v("#")]),e._v(" Part 2. Review")]),e._v(" "),a("p",[e._v("You will review and merge this PR.")]),e._v(" "),a("p",[e._v("You can add more commits to this PR if needed.")]),e._v(" "),a("p",[e._v("According to your merge strategy, you might either "),a("code",[e._v("Squash and merge")]),e._v(" or "),a("code",[e._v("Merge pull request")]),e._v(".")]),e._v(" "),a("p",[e._v("For more information, please refer to the "),a("RouterLink",{attrs:{to:"/guide/useful-config.html#mergestrategy"}},[e._v("mergeStrategy section of the guide")]),e._v(".")],1),e._v(" "),a("h3",{attrs:{id:"part-3-trigger-a-release-shipjs-trigger-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#part-3-trigger-a-release-shipjs-trigger-2"}},[e._v("#")]),e._v(" Part 3. Trigger a release ("),a("code",[e._v("shipjs trigger")]),e._v(")")]),e._v(" "),a("p",[e._v("On your terminal, "),a("code",[e._v("git pull")]),e._v(" on "),a("code",[e._v("master")]),e._v(" branch. And run "),a("code",[e._v("shipjs trigger")]),e._v(". It will check the following conditions whether it should proceed releasing or not.")]),e._v(" "),a("ul",[a("li",[e._v("if it's "),a("code",[e._v("master")]),e._v(" branch now")]),e._v(" "),a("li",[e._v("if the latest commit message is like "),a("code",[e._v("chore: releases v1.0.1 (#xx)")])])]),e._v(" "),a("p",[e._v("If the conditions are met, "),a("code",[e._v("shipjs trigger")]),e._v(" will briefly do the following:")]),e._v(" "),a("ul",[a("li",[e._v("Send a Slack message to notify the beginning of the release(If configured).")]),e._v(" "),a("li",[e._v("Run test, build and release it.")]),e._v(" "),a("li",[a("code",[e._v("git tag v1.0.1")]),e._v(".")]),e._v(" "),a("li",[e._v("Push them to git remote.")]),e._v(" "),a("li",[a("code",[e._v("hub release create -m <changelog> v1.0.1")])]),e._v(" "),a("li",[e._v("Notify at Slack.")])]),e._v(" "),a("p",[e._v("You can run "),a("code",[e._v("shipjs trigger --dry-run")]),e._v(" just to see what will be executed without actual execution.")]),e._v(" "),a("p",[e._v("And you can configure your CI service to run the Part 3 on behalf of you. What you need to do is just to make it run "),a("code",[e._v("shipjs trigger")]),e._v(" every time there is a new commit. It's okay to do so because "),a("code",[e._v("shipjs trigger")]),e._v(" triggers release only when the conditions are met. If not, it skips.")]),e._v(" "),a("p",{staticClass:"action"},[a("a",{staticClass:"nav-link action-button",attrs:{href:"./getting-started.html"}},[e._v("Get Started ‚Üí")])])])}),[],!1,null,null,null);t.default=i.exports}}]);